{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>{{ post.title }}</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' href="{% static 'css/reset.css' %}">
    <link rel='stylesheet' type='text/css' href="{% static 'css/thema.css' %}">
    <link rel='stylesheet' type='text/css' href="{% static 'app_posting/css/post.css' %}">
    <script src="{% static 'app_posting/js/post.js' %}"></script>
</head>

<body>
    {% include 'header.html' %}

    <main>
        <article>
            <header>
                <h2>{{ post.title }}</h2>
                <p>
                    <span>By {{ post.author }}</span> | 
                    <span>{{ post.published_at|date:"F j, Y" }}</span> |
                    <span>Category: <a href="{% url 'get_posts_by_slug' %}?slug={{ post.category.slug }}">{{ post.category.name }}</a></span>
                </p>
            </header>

            <!-- 섬네일 -->
            {% if post.thumbnail %}
                <section class="post-thumbnail">
                    <img src="{{ post.thumbnail.url }}" alt="{{ post.title }}">
                </section>
            {% endif %}

            <!-- 본문 -->
            <section class="post-body">
                {{ post.content|safe }}
            </section>

            <!-- 태그 -->
            <section class="post-tags">
                <h4>Tags:</h4>
                <ul>
                    {% for tag in post.tags.all %}
                        <li><a href="{% url 'get_posts_by_slug' %}?slug={{ tag.slug }}">{{ tag.name }}</a></li>
                    {% endfor %}
                </ul>
            </section>

            <!-- 소셜미디어 공유 -->
            <section class="post-share">
                <h4>Share this post:</h4>
                <ul>
                    <li><a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank">Facebook</a></li>
                    <li><a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}" target="_blank">Twitter</a></li>
                    <li><a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title }}" target="_blank">LinkedIn</a></li>
                </ul>
            </section>

        </article>
    </main>


    <!-- 댓글 -->
    <aside class="post-comments">
        <h3>Comments</h3>
        {% load comments %}
    
        <!-- 댓글 목록 렌더링 -->
        {% render_comment_list for post %}
    
        <!-- 댓글 작성 폼 -->
        <h4>Leave a Comment</h4>
        {% render_comment_form for post %}
    </aside>


    {% include 'footer.html' %}
</body>
</html>